<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Connexion...</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@600&display=swap" rel="stylesheet">
  <style>
    body { background:#080b10; color:#e8edf5; font-family:'Syne',sans-serif;
           display:flex; align-items:center; justify-content:center; min-height:100vh; }
    .box { text-align:center; }
    .spin { width:32px; height:32px; border:2px solid rgba(0,229,255,0.2);
            border-top-color:#00e5ff; border-radius:50%; animation:spin 0.6s linear infinite; margin:0 auto 16px; }
    @keyframes spin { to { transform:rotate(360deg); } }
    p { color:#5a6680; font-size:14px; }
  </style>
</head>
<body>
<div class="box">
  <div class="spin"></div>
  <p>Connexion GitHub en cours...</p>
</div>
<script>
  const params = new URLSearchParams(window.location.search);
  const token = params.get('token');
  const login = params.get('login');
  const avatar = params.get('avatar');

  if (token && login) {
    localStorage.setItem('sti_token', token);
    localStorage.setItem('sti_login', login);
    localStorage.setItem('sti_avatar', avatar ? decodeURIComponent(avatar) : '');
    window.location.href = '/';
  } else {
    document.querySelector('p').textContent = 'Erreur de connexion. RÃ©essaie.';
  }
</script>
</body>
</html>
